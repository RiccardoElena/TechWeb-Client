<div class="min-h-screen">
  <div class="relative">
    <div class="w-95/100">
      <h1
        class="mx-4 mt-20 md:mt-10 text-3xl md:text-5xl lg:text-7xl font-bold mt-10 text-zinc-900 dark:text-zinc-300 truncate"
      >
        {{ meme?.title }}
      </h1>
      <h2
        class="text-2xl md:text-4xl text-zinc-900 dark:text-zinc-300 ml-8 truncate"
      >
        by {{ meme?.User?.userName || "" }}
      </h2>
    </div>
    <button
      class="absolute w-8 h-8 flex items-center justify-center border-1 hover:bg-red-500 border-red-500 rounded-full top-2 right-8 text-red-100 hover:text-zinc-800 dark:hover:text-zinc-300 bg-white dark:bg-zinc-800"
      type="button"
      (click)="goBack()"
    >
      <fa-icon [icon]="icons.close"></fa-icon>
    </button>
  </div>
  <div
    class="relative my-4 p-2 md:p-4 w-9/10 sm:w-95/100 2xl:w-3/5 mx-auto bg-white dark:bg-zinc-800 rounded-lg shadow-md text-zinc-900 dark:text-zinc-300"
  >
    @if(this.authService.getUserId() === meme?.User?.id){
    <div class="absolute top-2 right-2 flex space-x-2">
      <button
        class="absolute top-6 right-4 text-zinc-500 hover:text-red-500"
        type="button"
        (click)="deleteMeme($event)"
      >
        <fa-icon [icon]="icons.delete"></fa-icon>
      </button>
      <button
        class="absolute top-6 right-12 text-zinc-500 hover:text-amber-500"
        type="button"
        (click)="editMeme($event)"
      >
        <fa-icon [icon]="icons.edit"></fa-icon>
      </button>
    </div>
    }
    <img
      [src]="meme?.filePath"
      [alt]="meme?.title"
      class="mx-auto w-auto h-auto sm:h-[50vh] rounded-lg"
    />
    <p
      class="mt-4 text-md md:text-xl text-justify {{
        showFullDcp ? '' : 'line-clamp-5'
      }}"
    >
      {{ meme?.description }}
    </p>
    <span
      (click)="toggleShowFullDcp()"
      class="lg:hidden mb-4 font-bold italic text-amber-300 hover:text-amber-400 underline"
      >read {{ showFullDcp ? "less" : "more" }}</span
    >
    <app-card-info
      [tags]="meme?.tags || []"
      [vote]="liked()"
      [upvotesNumber]="meme?.upvotesNumber || 0"
      [downvotesNumber]="meme?.downvotesNumber || 0"
      [commentsNumber]="totalNumberOfComments() || 0"
      (upvoteClick)="handleUpvoteClick()"
      (downvoteClick)="handleDownvoteClick()"
      (commentTextSubmit)="handleCommentSubmit($event)"
    ></app-card-info>
  </div>
  <div
    class="flex flex-col justify-center my-4 md:mt-8 bg-zinc-100 dark:bg-zinc-800 w-95/100 2xl:w-3/5 mx-auto p-4 rounded-lg shadow-md"
  >
    <h3 class="text-2xl md:text-3xl font-bold text-zinc-900 dark:text-zinc-300">
      Comments
    </h3>
    @for(comment of comments(); track comment.id) {
    <app-comment-card
      [inputComment]="comment"
      (commentDeleted)="commentDeleted($event)"
    ></app-comment-card>
    } @if(comments().length < this.totalNumberOfComments()){
    <button
      class="mx-auto rounded-xl bg-amber-600 text-zinc-50 dark:bg-amber-700 p-4 font-semibold hover:bg-amber-700 dark:hover:bg-amber-800 transition"
      (click)="loadMore()"
    >
      Show More
    </button>
    }
  </div>
</div>
